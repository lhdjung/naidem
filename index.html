<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Median with Missing Values Analysis • naidem</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Median with Missing Values Analysis">
<meta name="description" content="Provide alternatives to median() methods to check if the median can be determined even if some values are missing. See Franzese and Iuliano (2019) &lt;doi:10.1016/B978-0-12-809633-8.20354-3&gt; for general information.">
<meta property="og:description" content="Provide alternatives to median() methods to check if the median can be determined even if some values are missing. See Franzese and Iuliano (2019) &lt;doi:10.1016/B978-0-12-809633-8.20354-3&gt; for general information.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">naidem</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/algorithm.html">Implementing the algorithm</a></li>
    <li><a class="dropdown-item" href="articles/proof.html">Proving the algorithm</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/lhdjung/naidem/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="median-with-missing-values-analysis">Median with missing values analysis<a class="anchor" aria-label="anchor" href="#median-with-missing-values-analysis"></a>
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<!-- -->
<p>The goal of naidem is to compute the median in a way that handles missing values properly: checking whether <code>NA</code>s render the median unknown and quantifying uncertainty arising from them. It contains:</p>
<ul>
<li>
<code><a href="reference/median2.html">median2()</a></code> as a drop-in replacement for <code><a href="https://rdrr.io/r/stats/median.html" class="external-link">median()</a></code>. It returns <code>NA</code> if and only if the median can’t be determined from the data.</li>
<li>
<code><a href="reference/median_table.html">median_table()</a></code> to quantify uncertainty around a median estimate. It only ignores as many <code>NA</code>s as needed, not simply all of them. The output includes the lower and upper bounds of the median, how many <code>NA</code>s had to be ignored, etc.</li>
<li>
<code><a href="reference/median-plot-estimate.html">median_plot_errorbar()</a></code> and other follow-up visualizations.</li>
</ul>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of naidem like so:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"lhdjung/naidem"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="get-started">Get started<a class="anchor" aria-label="anchor" href="#get-started"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/lhdjung/naidem" class="external-link">naidem</a></span><span class="op">)</span></span></code></pre></div>
<p>Base R’s <code><a href="https://rdrr.io/r/stats/median.html" class="external-link">median()</a></code> function returns <code>NA</code> whenever the input vector contains one or more <code>NA</code>s. In many cases, missing values do make it impossible to compute the median. Yet some distributions have a clear median even so:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">alpha</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span><span class="va">beta</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">7</span>, <span class="fl">7</span>, <span class="fl">7</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">alpha</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] NA</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">beta</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] NA</span></span></code></pre></div>
<p>The actual median of <code>beta</code> is 7, irrespective of the true value behind <code>NA</code>. Use <code><a href="reference/median2.html">median2()</a></code> to distinguish between these cases:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/median2.html">median2</a></span><span class="op">(</span><span class="va">alpha</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] NA</span></span>
<span><span class="fu"><a href="reference/median2.html">median2</a></span><span class="op">(</span><span class="va">beta</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 7</span></span></code></pre></div>
<p>Compare this to <code>NA^0</code>, which returns <code>1</code> even though <code>NA^2</code> returns <code>NA</code>. This also makes <code>NA</code> more meaningful when it is returned: users can be sure that the median really is unknown. See <a href="https://lhdjung.github.io/naidem/articles/algorithm.html"><em>Implementing the algorithm</em></a> for more information on naidem’s solution.</p>
<p>What to do if the median really is unknown, like above? Call <code><a href="reference/median_table.html">median_table()</a></code> to get a sense of the uncertainty around the median of the known values:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df1</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/median_table.html">median_table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="va">alpha</span>, beta <span class="op">=</span> <span class="va">beta</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">df1</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 10</span></span>
<span><span class="co">#&gt;   term  estimate certainty lower upper na_ignored na_total rate_ignored_na</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;    &lt;dbl&gt; &lt;lgl&gt;     &lt;dbl&gt; &lt;dbl&gt;      &lt;int&gt;    &lt;int&gt;           &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 alpha        4 FALSE       3.5   4.5          1        2             0.5</span></span>
<span><span class="co">#&gt; 2 beta         7 TRUE        7     7            0        1             0  </span></span>
<span><span class="co">#&gt; # ℹ 2 more variables: sum_total &lt;int&gt;, rate_ignored_sum &lt;dbl&gt;</span></span></code></pre></div>
<p>Visualize the lower and upper bounds of the median estimate using <code><a href="reference/median-plot-estimate.html">median_plot_errorbar()</a></code>:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/median-plot-estimate.html">median_plot_errorbar</a></span><span class="op">(</span><span class="va">df1</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-7-1.png" width="75%"></p>
<p>The precise value of <code>alpha</code> is unknown, but it is bound to fall between the bars. Since the median of <code>beta</code> is known, its bars are not expanded, and it is marked as certain by a ring around its point.</p>
<p>Also, <code><a href="reference/median_table.html">median_table()</a></code> counts how many missing values need to be ignored to determine the median of the remaining values. This balances the need for knowledge about the central tendency with an appreciation of its uncertainty.</p>
<p>Make it apparent with <code><a href="reference/median_plot_col.html">median_plot_col()</a></code>. No bars are shown for <code>beta</code> because its <code>NA</code> does not need to be ignored:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/median_plot_col.html">median_plot_col</a></span><span class="op">(</span><span class="va">df1</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-8-1.png" width="75%"></p>
</div>
<div class="section level2">
<h2 id="about-this-package">About this package<a class="anchor" aria-label="anchor" href="#about-this-package"></a>
</h2>
<p>“naidem” is “median” backwards, but it also expresses the goal of treating <code>NA</code> in the same (<em>idem</em>) conceptual way as R language primitives like <code>^</code> do. Note that naidem is not about imputation at all, but simply about determining the median.</p>
<p>The <a href="https://github.com/lhdjung/moder" class="external-link">moder</a> package serves a similar purpose, but for the mode instead of the median. Working on moder provided the impetus behind naidem.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/lhdjung/naidem/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/lhdjung/naidem/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 2)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing naidem</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Lukas Jung <br><small class="roles"> Author, maintainer </small>   </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lukas Jung.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
